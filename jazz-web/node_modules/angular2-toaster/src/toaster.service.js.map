{"version":3,"file":"toaster.service.js","sourceRoot":"","sources":["../../src/toaster.service.ts"],"names":[],"mappings":"OAAO,EAAC,UAAU,EAAC,MAAM,eAAe;OAEjC,EAAC,UAAU,EAAC,MAAM,iBAAiB;OACnC,yBAAyB;OAEzB,EAAC,OAAO,EAAC,MAAM,cAAc;AAIpC;IAWI;;OAEG;IACH;QAdJ,iBAoFC;QArEO,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU,CAAQ,UAAC,QAAa,IAAK,OAAA,KAAI,CAAC,SAAS,GAAG,QAAQ,EAAzB,CAAyB,CAAC,CAAC,KAAK,EAAE,CAAC;QAC5F,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,CAAgB,UAAC,QAAa,IAAK,OAAA,KAAI,CAAC,YAAY,GAAG,QAAQ,EAA5B,CAA4B,CAAC,CAAC,KAAK,EAAE,CAAC;QAC1G,IAAI,CAAC,mBAAmB,GAAG,IAAI,OAAO,EAAiB,CAAA;QACvD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC;IACxD,CAAC;IAGD;;;;;;;;OAQG;IACH,4BAAG,GAAH,UAAI,IAAoB,EAAE,KAAc,EAAE,IAAa;QACnD,IAAI,KAAK,GAAG,OAAO,IAAI,KAAK,QAAQ,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC;QAEvF,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAE/B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAClB,MAAM,IAAI,KAAK,CAAC,gEAAgE,CAAC,CAAC;QACtF,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3B,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAGD;;;;;;;;;OASG;IACH,iCAAQ,GAAR,UAAS,IAAoB,EAAE,KAAc,EAAE,IAAa;QAA5D,iBAMC;QALG,UAAU,CAAC;YACP,KAAI,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAChC,CAAC,EAAE,CAAC,CAAC,CAAC;QAEN,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAGD;;;;;;OAMG;IACH,8BAAK,GAAL,UAAM,OAAgB,EAAE,gBAAyB;QAC7C,IAAI,YAAY,GAAkB;YAC9B,OAAO,EAAE,OAAO,EAAE,gBAAgB,EAAE,gBAAgB;SACvD,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;IACxC,CAAC;IACE,yBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;KACnB,CAAC;IACF,kBAAkB;IACX,6BAAc,GAAmE,cAAM,OAAA,EAC7F,EAD6F,CAC7F,CAAC;IACF,qBAAC;AAAD,CAAC,AApFD,IAoFC;AAOD,sEAAsE;AACtE;IAAA;IAOA,CAAC;IANU,YAAO,GAAd;QACI,MAAM,CAAC,sCAAsC,CAAC,OAAO,CAAC,OAAO,EAAE,UAAS,CAAC;YACrE,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,EAAE,GAAC,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAC,GAAG,GAAC,GAAG,CAAC,CAAC;YAC3D,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;IACP,CAAC;IACL,WAAC;AAAD,CAAC,AAPD,IAOC","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {Toast} from './toast';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/share';\r\nimport {Observer} from 'rxjs/Observer';\r\nimport {Subject} from 'rxjs/Subject';\r\n\r\n\r\n\r\nexport class ToasterService {\r\n    addToast: Observable<Toast>;\r\n    private _addToast: Observer<Toast>;\r\n\r\n    clearToasts: Observable<IClearWrapper>;\r\n    private _clearToasts: Observer<IClearWrapper>;\r\n\r\n    removeToast: Observable<IClearWrapper>;\r\n    /** @internal */\r\n    _removeToastSubject: Subject<IClearWrapper>\r\n\r\n    /**\r\n     * Creates an instance of ToasterService.\r\n     */\r\n    constructor() {\r\n        this.addToast = new Observable<Toast>((observer: any) => this._addToast = observer).share();\r\n        this.clearToasts = new Observable<IClearWrapper>((observer: any) => this._clearToasts = observer).share();\r\n        this._removeToastSubject = new Subject<IClearWrapper>()\r\n        this.removeToast = this._removeToastSubject.share();\r\n    }\r\n\r\n    \r\n    /**\r\n     * Synchronously create and show a new toast instance.\r\n     * \r\n     * @param {(string | Toast)} type The type of the toast, or a Toast object.\r\n     * @param {string=} title The toast title.\r\n     * @param {string=} body The toast body.\r\n     * @returns {Toast}\r\n     *          The newly created Toast instance with a randomly generated GUID Id.\r\n     */\r\n    pop(type: string | Toast, title?: string, body?: string): Toast {\r\n        let toast = typeof type === 'string' ? { type: type, title: title, body: body } : type;\r\n\r\n        toast.toastId = Guid.newGuid();\r\n\r\n        if (!this._addToast) {\r\n            throw new Error(\"No Toaster Containers have been initialized to receive toasts.\");\r\n        }\r\n        \r\n        this._addToast.next(toast);\r\n        return toast;\r\n    }\r\n\r\n    \r\n    /**\r\n     * Asynchronously create and show a new toast instance.\r\n     * \r\n     * @param {(string | Toast)} type The type of the toast, or a Toast object.\r\n     * @param {string=} title The toast title.\r\n     * @param {string=} body The toast body.\r\n     * @returns {Observable<Toast>}\r\n     *          A hot Observable that can be subscribed to in order to receive the Toast instance \r\n     *          with a randomly generated GUID Id.\r\n     */\r\n    popAsync(type: string | Toast, title?: string, body?: string): Observable<Toast> {\r\n        setTimeout(() => {\r\n            this.pop(type, title, body);\r\n        }, 0);\r\n\r\n        return this.addToast;\r\n    }\r\n\r\n    \r\n    /**\r\n     * Clears a toast by toastId and/or toastContainerId.\r\n     * \r\n     * @param {string} toastId The toastId to clear.\r\n     * @param {number=} toastContainerId \r\n     *        The toastContainerId of the container to remove toasts from.\r\n     */\r\n    clear(toastId?: string, toastContainerId?: number) {\r\n        let clearWrapper: IClearWrapper = {\r\n            toastId: toastId, toastContainerId: toastContainerId\r\n        };\r\n\r\n        this._clearToasts.next(clearWrapper)\r\n    }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\r\n\r\nexport interface IClearWrapper {\r\n    toastId?: string;\r\n    toastContainerId?: number;\r\n}\r\n\r\n// http://stackoverflow.com/questions/26501688/a-typescript-guid-class\r\nclass Guid {\r\n    static newGuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n            var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}