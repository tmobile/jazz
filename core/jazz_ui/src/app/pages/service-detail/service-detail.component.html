<jazz-mob-header [icon]="'notification'" [headText]="service.name" [status]="'green'"></jazz-mob-header>
<section class="page-container service-detail-page">
    <navigation-bar *ngIf='!isError403' [links]="breadcrumbs"></navigation-bar>

    <div class="content relative" [class.non-clickable] = 'service.status == "deletion started" || service.status == "deletion completed"'>
                        <span  class="reduxC" *ngIf='service.status == "deletion completed"'></span>
                        <span  class="reduxS" *ngIf='service.status == "deletion started"'></span>

        <div *ngIf='!isError403' class="page-title-wrap hide-for-mobile">
            <div class="title-platform">
            <h1 class="page-hdr bold-title">{{service.name}}</h1>
            <span class="page-sub-title"><span class="service-platform">{{provider}}</span><span class="service-type">{{service.serviceType}}</span><span *ngIf="service.runtime"> - {{service.runtime}}</span></span>
            </div>
            <div class="image-btn-div">
            <div class="image-container" *ngIf="selectedTab == 0">
                <img src="../../../assets/images/icons/Azure.svg" *ngIf="provider ==='azure'" alt="azureimage" class="azure-image">
                <div class="icon-icon-AWS" *ngIf="provider ==='aws'">
                    <span class="path1"></span><span class="path2"></span><span class="path3"></span><span
                        class="path4"></span><span class="path5"></span><span class="path6"></span><span class="path7"></span><span
                        class="path8"></span><span class="path9"></span><span class="path10"></span><span
                        class="path11"></span><span class="path12"></span><span class="path13"></span><span
                        class="path14"></span><span class="path15"></span><span class="path16"></span><span
                        class="path17"></span><span class="path18"></span><span class="path19"></span><span
                        class="path20"></span><span class="path21"></span><span class="path22"></span><span
                        class="path23"></span><span class="path24"></span><span class="path25"></span><span
                        class="path26"></span><span class="path27"></span><span class="path28"></span><span
                        class="path29"></span><span class="path30"></span><span class="path31"></span><span
                        class="path32"></span><span class="path33"></span>
                </div>
            </div>
            <btn-jazz-secondary class="delete-service-btn" text="DELETE SERVICE" [disablebtn]="!canDelete || !isAdminAccess" (click)="deleteService(true)"></btn-jazz-secondary>
            </div>
        </div>
        <div *ngIf='!isError403' class='tab-component'>
            <div class="refresh-button" (click)="refreshTab()">
            </div>
            <tabs [beforeEnv]= "!isENVavailable" [type]="'service'" [tabData]="tabData" [selectedTab]="selectedTab" [isAdminAccess]= "isAdminAccess" [tabChanged]="tabChanged" (onSelected)="onSelectedDr($event)"></tabs>

        </div>

        <div *ngIf='!err_flag'>
            <section class="page-content" *ngIf="selectedTab == 0">
                <service-overview #selectedTabComponent (open_sidebar)='opnSidebar($event)'(onload)='env($event)' (onEnvGet)='envList($event)' [service]="service" [isAdminAccess]= "isAdminAccess" [isLoadingService]="isLoadingService"  [provider]="provider"></service-overview>
            </section>
            <section class="page-content" *ngIf="selectedTab == 1">
                <service-access-control #selectedTabComponent [service]="service" (updateAdminAccess)='setAdminAccess($event)' [isAdminAccess]= "isAdminAccess" ></service-access-control>
            </section>
            <section class="page-content" *ngIf="selectedTab == 2">
                <service-metrics #selectedTabComponent [service]="service" #metric></service-metrics>
            </section>
            <section class="page-content" *ngIf="selectedTab == 3">
                <service-cost #selectedTabComponent #cost [service]="service"></service-cost>
            </section>

          <section class="page-content" *ngIf="selectedTab == 4">
            <service-logs #selectedTabComponent #logs [service]="service"></service-logs>
          </section>
        </div>
        <div *ngIf='err_flag' class='err-wrp'>
            <section *ngIf='isError403'>
                <error403></error403>
            </section>
            <div *ngIf='!isError403' class="empty-row with-refresh relative">
                <div class="loading-row" [class.show]="isLoadingService">
                        <div class="loading-circle"></div>
                </div>
                <img src="assets/images/refresh.png" alt="errorimg" width="100">
                <div class='oops'>Oops!</div>
                <div>{{errMessage}}<br><a (click)="refreshServ()">REFRESH</a> to give it another try.</div>
                <br><div class='ctc-us'>If the problem persists, <a (click)='goToAbout("about")'> contact us</a>.</div>
            </div>
        </div>
    </div>
</section>

<sidebar [show]="showPopUp" (onClose)="hideDeletePopup(false)" class="delete-ser">
    <div class="delete-service-pop">

        <div class="step-1" *ngIf="!success">
            <h1>CONFIRMATION</h1>
            <div class="delete-service-popup-content">
                <p [class.invisible]="isLoading"> Are you sure you want to permanently delete <span>{{service.name}}</span>? Please confirm</p>
                <div class="loading-row" [class.show]="isLoading">
                    <div class="loading-circle"></div>
                </div>
                <div class="input-wrapper" [class.invisible]="isLoading">
                    <input name="serviceName" type="text" class="textForm" placeholder="Service Name" id="service-name-search" [(ngModel)]="ServiceName" (ngModelChange)="onServiceNameChange()">
                </div>
                <div class="footer-btns" [class.invisible]="isLoading">
                    <btn-jazz-primary text="DELETE" (click)="deleteServiceInit()" newclass="delete-btn" [disablePrimaryBtn]="disblebtn"></btn-jazz-primary>
                    <a (click)="hideDeletePopup()">CANCEL</a>
                </div>
            </div>
        </div>
        <div class="step-1" *ngIf="serviceDeleted">
                <h1>CONFIRMATION</h1>
                <div class="delete-service-popup-content message">
                    <div class='oops'>Success!</div><br>
                    <div class="ctc-us">"{{service.name}}" {{successMessage}}</div>
                </div>
                <div class="footer-btns" [class.invisible]="isLoading">
                        <btn-jazz-primary text="DONE" (click)="backtoservice()" newclass="delete-btn"></btn-jazz-primary>

                </div>
        </div>
        <div class="step-1" *ngIf="serviceDeleteFailed">
                <h1>CONFIRMATION</h1>
                <div class="delete-service-popup-content message">
                        <div class='oops'>Oops!</div>
                        <div class="ctc-us">{{errorMessage}}</div>
                        <br><div class='ctc-us'>If the problem persists, <a (click)='goToAbout("about")'> contact us</a>.</div>
                </div>
                <div class="footer-btns" [class.invisible]="isLoading">
                        <btn-jazz-primary text=" DONE" (click)="backtoservice()" newclass="delete-btn"></btn-jazz-primary>

                </div>
        </div>
    </div>
</sidebar>
<section class='overview-sidebar'>
    <sidebar [show]="close" (onClose)="closeSidebar($event)">
            <overview-sidebar (onClose)="closeSidebar($event)"></overview-sidebar>
    </sidebar>
</section>
<footer></footer>
