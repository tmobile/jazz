{
    "swagger": "2.0",
    "info": {
      "version": "2017-01-30T23:30:18Z",
      "title": "{api_deployment_node_title}",
      "description": "CRUD APIs for assets Catalog"
    },
    "host": "{api_host_name}",
    "basePath": "/{domain}",
    "schemes": [
      "https"
    ],
    "paths": {
      "/{service_name}": {
        "options": {
          "description": "CORS Support",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "tags": [
            "CORS"
          ],
          "x-amazon-apigateway-integration": {
            "type": "mock",
            "requestTemplates": {
              "application/json": "{\"statusCode\" : 200}"
            },
            "responses": {
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "$input.json('$')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Default response for CORS method",
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              }
            }
          }
        },
        "get": {
          "description": "Get list of assets",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "responses": {
            "200": {
              "description": "Successful Execution",
              "schema": {
                "$ref": "#/definitions/GetAssetListSuccessResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            }
          },
          "security": [
            {
              "{envPrefix}-{domain}-cognito-authorizer": []
            }
          ],
          "x-amazon-apigateway-integration": {
            "uri": "arn:aws:apigateway:{conf-region}:lambda:path/2015-03-31/functions/arn:aws:lambda:{conf-region}:{conf-accId}:function:{lambda_function_name}/invocations",
            "passthroughBehavior": "when_no_templates",
            "httpMethod": "POST",
            "credentials": "{conf-role}",
            "requestTemplates": {
              "application/json": "\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $input.json(\"$\"),\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}",
              "application/x-www-form-urlencoded": "\n#define( $body )\n  {\n  #foreach( $token in $input.path('$').split('&') )\n    #set( $keyVal = $token.split('=') )\n    #set( $keyValSize = $keyVal.size() )\n    #if( $keyValSize >= 1 )\n      #set( $key = $util.urlDecode($keyVal[0]) )\n      #if( $keyValSize >= 2 )\n        #set( $val = $util.urlDecode($keyVal[1]) )\n      #else\n        #set( $val = '' )\n      #end\n      \"$key\": \"$val\"#if($foreach.hasNext),#end\n    #end\n  #end\n  }\n#end\n\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $body,\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}"
            },
            "contentHandling": "CONVERT_TO_TEXT",
            "type": "aws",
            "responses": {
              ".*\"InternalServerError\".*": {
                "statusCode": "500",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"BadRequest\".*": {
                "statusCode": "400",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "{\"data\" : $input.json('$.data'),\"input\" : $input.json('$.input')}"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Unauthorized\".*": {
                "statusCode": "401",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Forbidden\".*": {
                "statusCode": "403",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"NotFound\".*": {
                "statusCode": "404",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          }
        },
        "post": {
          "description": "create an asset",
          "parameters": [
            {
              "name": "param",
              "in": "body",
              "description": "post body parameter.",
              "required": true,
              "schema": {
                "$ref": "#/definitions/CreateAssetsObj"
              }
            }
          ],
          "consumes": [
            "application/json",
            "application/x-www-form-urlencoded"
          ],
          "produces": [
            "application/json",
            "application/x-www-form-urlencoded"
          ],
          "responses": {
            "200": {
              "description": "Successful Execution",
              "schema": {
                "$ref": "#/definitions/PostSuccessResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            }
          },
          "security": [
            {
              "{envPrefix}-{domain}-cognito-authorizer": []
            }
          ],
          "x-amazon-apigateway-integration": {
            "type": "aws",
            "uri": "arn:aws:apigateway:{conf-region}:lambda:path/2015-03-31/functions/arn:aws:lambda:{conf-region}:{conf-accId}:function:{lambda_function_name}/invocations",
            "httpMethod": "POST",
            "credentials": "{conf-role}",
            "requestTemplates": {
              "application/json": "\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $input.json(\"$\"),\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}",
              "application/x-www-form-urlencoded": "\n#define( $body )\n  {\n  #foreach( $token in $input.path('$').split('&') )\n    #set( $keyVal = $token.split('=') )\n    #set( $keyValSize = $keyVal.size() )\n    #if( $keyValSize >= 1 )\n      #set( $key = $util.urlDecode($keyVal[0]) )\n      #if( $keyValSize >= 2 )\n        #set( $val = $util.urlDecode($keyVal[1]) )\n      #else\n        #set( $val = '' )\n      #end\n      \"$key\": \"$val\"#if($foreach.hasNext),#end\n    #end\n  #end\n  }\n#end\n\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $body,\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}"
            },
            "responses": {
              ".*\"InternalServerError\".*": {
                "statusCode": "500",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"BadRequest\".*": {
                "statusCode": "400",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "{\"data\" : $input.json('$.data'),\"input\" : $input.json('$.input')}"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Unauthorized\".*": {
                "statusCode": "401",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Forbidden\".*": {
                "statusCode": "403",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"NotFound\".*": {
                "statusCode": "404",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          }
        }
      },
      "/assets/{id}": {
        "options": {
          "description": "CORS Support",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "tags": [
            "CORS"
          ],
          "x-amazon-apigateway-integration": {
            "type": "mock",
            "requestTemplates": {
              "application/json": "{\"statusCode\" : 200}"
            },
            "responses": {
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "$input.json('$')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Default response for CORS method",
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              }
            }
          }
        },
        "get": {
          "description": "Get asset details for asset id",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Execution",
              "schema": {
                "$ref": "#/definitions/AssetsObj"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            }
          },
          "security": [
            {
              "{envPrefix}-{domain}-cognito-authorizer": []
            }
          ],
          "x-amazon-apigateway-integration": {
            "uri": "arn:aws:apigateway:{conf-region}:lambda:path/2015-03-31/functions/arn:aws:lambda:{conf-region}:{conf-accId}:function:{lambda_function_name}/invocations",
            "passthroughBehavior": "when_no_templates",
            "httpMethod": "POST",
            "credentials": "{conf-role}",
            "requestTemplates": {
              "application/json": "\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $input.json(\"$\"),\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}",
              "application/x-www-form-urlencoded": "\n#define( $body )\n  {\n  #foreach( $token in $input.path('$').split('&') )\n    #set( $keyVal = $token.split('=') )\n    #set( $keyValSize = $keyVal.size() )\n    #if( $keyValSize >= 1 )\n      #set( $key = $util.urlDecode($keyVal[0]) )\n      #if( $keyValSize >= 2 )\n        #set( $val = $util.urlDecode($keyVal[1]) )\n      #else\n        #set( $val = '' )\n      #end\n      \"$key\": \"$val\"#if($foreach.hasNext),#end\n    #end\n  #end\n  }\n#end\n\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $body,\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}"
            },
            "contentHandling": "CONVERT_TO_TEXT",
            "type": "aws",
            "responses": {
              ".*\"InternalServerError\".*": {
                "statusCode": "500",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"BadRequest\".*": {
                "statusCode": "400",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "{\"data\" : $input.json('$.data'),\"input\" : $input.json('$.input')}"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Unauthorized\".*": {
                "statusCode": "401",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Forbidden\".*": {
                "statusCode": "403",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"NotFound\".*": {
                "statusCode": "404",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          }
        },
        "put": {
          "description": "update details of an asset",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "type": "string"
            },
            {
              "name": "param",
              "in": "body",
              "description": "post body parameter.",
              "required": true,
              "schema": {
                "$ref": "#/definitions/UpdateAssetsObj"
              }
            }
          ],
          "consumes": [
            "application/json",
            "application/x-www-form-urlencoded"
          ],
          "produces": [
            "application/json",
            "application/x-www-form-urlencoded"
          ],
          "responses": {
            "200": {
              "description": "Successful Execution",
              "schema": {
                "$ref": "#/definitions/PutSuccessResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "400": {
              "description": "Bad Request",
              "schema": {
                "$ref": "#/definitions/400ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "$ref": "#/definitions/401ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "$ref": "#/definitions/403ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "404": {
              "description": "Not Found",
              "schema": {
                "$ref": "#/definitions/404ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            },
            "500": {
              "description": "Internal Server Error",
              "schema": {
                "$ref": "#/definitions/500ErrorResponse"
              },
              "headers": {
                "Access-Control-Allow-Headers": {
                  "type": "string"
                },
                "Access-Control-Allow-Methods": {
                  "type": "string"
                },
                "Access-Control-Allow-Origin": {
                  "type": "string"
                }
              }
            }
          },
          "security": [
            {
              "{envPrefix}-{domain}-cognito-authorizer": []
            }
          ],
          "x-amazon-apigateway-integration": {
            "type": "aws",
            "uri": "arn:aws:apigateway:{conf-region}:lambda:path/2015-03-31/functions/arn:aws:lambda:{conf-region}:{conf-accId}:function:{lambda_function_name}/invocations",
            "httpMethod": "POST",
            "credentials": "{conf-role}",
            "requestTemplates": {
              "application/json": "\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $input.json(\"$\"),\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}",
              "application/x-www-form-urlencoded": "\n#define( $body )\n  {\n  #foreach( $token in $input.path('$').split('&') )\n    #set( $keyVal = $token.split('=') )\n    #set( $keyValSize = $keyVal.size() )\n    #if( $keyValSize >= 1 )\n      #set( $key = $util.urlDecode($keyVal[0]) )\n      #if( $keyValSize >= 2 )\n        #set( $val = $util.urlDecode($keyVal[1]) )\n      #else\n        #set( $val = '' )\n      #end\n      \"$key\": \"$val\"#if($foreach.hasNext),#end\n    #end\n  #end\n  }\n#end\n\n#define( $loop )\n  {\n  #foreach($key in $map.keySet())\n      \"$util.escapeJavaScript($key)\":\n        \"$util.escapeJavaScript($map.get($key))\"\n        #if( $foreach.hasNext ) , #end\n  #end\n  }\n#end\n\n{\n  \"body\": $body,\n  \"method\": \"$context.httpMethod\",\n  \"principalId\": \"$context.authorizer.principalId\",\n  \"stage\": \"$context.stage\",\n\n  #set( $map = $input.params().header )\n  \"headers\": $loop,\n\n  #set( $map = $input.params().querystring )\n  \"query\": $loop,\n\n  #set( $map = $input.params().path )\n  \"path\": $loop,\n\n  #set( $map = $context.identity )\n  \"identity\": $loop,\n\n  #set( $map = $stageVariables )\n  \"stageVariables\": $loop\n}"
            },
            "responses": {
              ".*\"InternalServerError\".*": {
                "statusCode": "500",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"BadRequest\".*": {
                "statusCode": "400",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              "default": {
                "statusCode": "200",
                "responseTemplates": {
                  "application/json": "{\"data\" : $input.json('$.data'),\"input\" : $input.json('$.input')}"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Unauthorized\".*": {
                "statusCode": "401",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"Forbidden\".*": {
                "statusCode": "403",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              },
              ".*\"NotFound\".*": {
                "statusCode": "404",
                "responseTemplates": {
                  "application/json": "$input.path('$.errorMessage')"
                },
                "responseParameters": {
                  "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                  "method.response.header.Access-Control-Allow-Methods": "'*'",
                  "method.response.header.Access-Control-Allow-Origin": "'*'"
                }
              }
            }
          }
        }
      }
    },
    "securityDefinitions": {
      "{envPrefix}-{domain}-cognito-authorizer": {
        "type": "apiKey",
        "name": "Authorization",
        "in": "header",
        "x-amazon-apigateway-authtype": "custom",
        "x-amazon-apigateway-authorizer": {
          "authorizerCredentials": "{conf-role}",
          "authorizerResultTtlInSeconds": 300,
          "authorizerUri": "arn:aws:apigateway:{conf-region}:lambda:path/2015-03-31/functions/arn:aws:lambda:{conf-region}:{conf-accId}:function:{envPrefix}-{domain}-cognito-authorizer-{envmnt}/invocations",
          "type": "token"
        }
      }
    },
    "definitions": {
      "400ErrorResponse": {
        "type": "object",
        "properties": {
          "error_type": {
            "type": "string",
            "default": "Bad Request format"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "401ErrorResponse": {
        "type": "object",
        "properties": {
          "errorType": {
            "type": "string",
            "default": "Unauthorized"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "403ErrorResponse": {
        "type": "object",
        "properties": {
          "errorType": {
            "type": "string",
            "default": "Forbidden"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "404ErrorResponse": {
        "type": "object",
        "properties": {
          "error_type": {
            "type": "string",
            "default": "Resource Not Found"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "500ErrorResponse": {
        "type": "object",
        "properties": {
          "error_type": {
            "type": "string",
            "default": "Internal Server Error"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "UpdateAssetsObj": {
        "description": "Input object with set of fields that can be updated",
        "type": "object",
        "properties": {
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for the service"
          },
          "status": {
            "enum": [
              "active",
              "deleted"
            ],
            "description": "Status of the asset - active if created, inactive if deleted."
          }
        }
      },
      "CreateAssetsObj": {
        "type": "object",
        "description": "Input object for creation of new asset",
        "required": [
          "service",
          "domain",
          "environment",
          "type",
          "provider",
          "provider_id"
        ],
        "properties": {
          "provider": {
            "type": "string",
            "description": "Name of cloud provider (aws, azure, google, etc.)"
          },
          "provider_id": {
            "type": "string",
            "description": "Identifier provided by the cloud provider (ARN in case of AWS)"
          },
          "service": {
            "type": "string",
            "description": "Service name"
          },
          "domain": {
            "type": "string",
            "description": "Domain for the service"
          },
          "environment": {
            "type": "string",
            "description": "Environment that created the asset"
          },
          "type": {
            "type": "string",
            "enum": [
              "apigateway",
              "s3",
              "lambda",
              "cloudfront",
              "cloudwatch_event",
              "dynamodb"
            ],
            "description": "Asset Type"
          },
          "status": {
            "enum": [
              "active",
              "deleted"
            ],
            "description": "Status of the asset - active if created, inactive if deleted."
          },
          "created_by": {
            "type": "string",
            "description": "Entity that created the asset, typically a service account"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for the service"
          }
        }
      },
      "GetAssetsObj": {
        "type": "object",
        "description": "Input object for creation of new asset",
        "properties": {
          "id": {
            "type": "string",
            "description": "String id to uniquely identify a asset"
          },
          "provider": {
            "type": "string",
            "description": "Name of cloud provider (aws, azure, google, etc.)"
          },
          "provider_id": {
            "type": "string",
            "description": "Identifier provided by the cloud provider (ARN in case of AWS)"
          },
          "service": {
            "type": "string",
            "description": "Service name"
          },
          "domain": {
            "type": "string",
            "description": "Domain for the service"
          },
          "environment": {
            "type": "string",
            "description": "Environment that created the asset"
          },
          "type": {
            "type": "string",
            "enum": [
              "apigateway",
              "s3",
              "lambda",
              "cloudfront",
              "cloudwatch_event",
              "dynamodb"
            ],
            "description": "Asset Type"
          },
          "status": {
            "enum": [
              "active",
              "deleted"
            ],
            "description": "Status of the asset - active if created, inactive if deleted."
          },
          "created_by": {
            "type": "string",
            "description": "Entity that created the asset, typically a service account"
          },
          "timestamp": {
            "type": "string",
            "description": "Event timestamp",
            "format": "date-time"
          }
        }
      },
      "AssetsObj": {
        "allOf": [
          {
            "$ref": "#/definitions/CreateAssetsObj"
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "description": "String id to uniquely identify a asset"
              }
            }
          }
        ]
      },
      "AssetsListObj": {
        "allOf": [
          {
            "$ref": "#/definitions/CreateAssetsObj"
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "description": "String id to uniquely identify a asset"
              }
            }
          }
        ]
      },
      "PutSuccessResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "description": "The response payload",
            "properties": {
              "message": {
                "type": "string",
                "description": "Message for Successful updation of asset"
              }
            }
          },
          "input": {
            "$ref": "#/definitions/UpdateAssetsObj"
          }
        },
        "description": "200 Success Response payload for update asset"
      },
      "PostSuccessResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "description": "The response payload",
            "properties": {
              "asset_id": {
                "type": "string",
                "description": "The unique ID returned for created asset"
              },
              "message": {
                "type": "string",
                "description": "Message for Successful Creation of asset"
              }
            }
          },
          "input": {
            "$ref": "#/definitions/CreateAssetsObj"
          }
        },
        "description": "200 Success Response payload for create new asset"
      },
      "GetAssetSuccessResponse": {
        "type": "object",
        "description": "List of all matched assets.",
        "properties": {
          "data": {
            "type": "array",
            "description": "The response payload",
            "items": {
              "allOf": [
                {
                  "$ref": "#/definitions/AssetsObj"
                }
              ]
            }
          },
          "input": {
            "$ref": "#/definitions/GetAssetsObj"
          }
        }
      },
      "GetAssetListSuccessResponse": {
        "type": "object",
        "description": "List of all matched assets.",
        "properties": {
          "data": {
            "properties": {
              "count": {
                "type": "string",
                "description": "Total number of services pulled"
              },
              "assets": {
                "type": "array",
                "description": "The response payload",
                "items": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/AssetsObj"
                    }
                  ]
                }
              }
            }
          },
          "input": {
            "$ref": "#/definitions/GetAssetsObj"
          }
        }
      }
    }
  }